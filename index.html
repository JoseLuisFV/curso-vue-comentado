<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
  </head>
  <body>
    <script src="https://unpkg.com/vue@3"></script>
    <div id="app" class="app"></div>
    <script>  
      const { createApp } = Vue; 
      
      const vm = createApp({
        data() {
          return {
            isOpen: false,
            text: "Abrir sesi칩n",
            userName: '',
            password: '',
            posts: [
              {
                title: "Un titulo chido", 
                description: "Puro chismecito del bueno, ven a leer en de que habla el mundo"
              },
              {
                title: "Un titulo chido", 
                description: "Puro chismecito del bueno, ven a leer en de que habla el mundo"
              },
              {
                title: "Un titulo chido", 
                description: "Puro chismecito del bueno, ven a leer en de que habla el mundo"
              },
              {
                title: "Un titulo chido", 
                description: "Puro chismecito del bueno, ven a leer en de que habla el mundo"
              },
              {
                title: "Un titulo chido", 
                description: "Puro chismecito del bueno, ven a leer en de que habla el mundo"
              },
            ],
            titlePost: '',
            descriptionPost: '',
            message: '',
            letKnowUser: false,
          };
        },
        template: `
          <header class="header">
            <h1 class="header__title">Another social website</h1>
          </header>
          <section v-if="!isOpen" class="login">
            <h2 class="login__title">Login</h2>
            <div class="login__label">username:</div>
            <input v-model="userName" class="login__input" />
            <div class="login__label">password:</div>
            <input type="password" v-model="password" class="login__input" />
            <button @click="logIn">Inicia Sesi칩n</button>
          </section>
          <section class="posts" v-else>
            <h2 class="posts__title">Posts</h2>
            <article class="post">
              <div class="post__label">Titulo del post</div>
              <input 
                class="post__title"
                placeholder="Escribe un gran titulo"
                v-model="titlePost"
                />
              <div class="post__label">Contenido</div>
              <textarea 
                class="post__description" 
                rows="4" 
                cols="42" 
                placeholder="Cuentanos que pasa por tu mente"
                v-model="descriptionPost"
                />
              <button 
                class="post__button"
                @click="addPost">
                  Agrega post
                </button>
            </article>
            <ul class="posts__list"
              >
              <li 
                v-for="(item, index) in posts" 
                :key="index"  
                class="posts__item">
                  <h4 class="posts__title">{{ item.title }}</h4>
                  <p class="posts__description">{{ item.description }}</p>
                  <button @click="deletePost(index)">Borrar post</button>
              </li>
            </ul>
          </section>
          <div v-if="letKnowUser" class="message">
            <div class="message__text">{{ message }}</div>
            <div class="message__button" @click="closeMessage"></div>
          </div>
        `,
        methods: {
          logIn() {
            const fields = [
              this.userName,
              this.password
            ]
            if(!this.isOpen && this.checkEmptyFields(fields)) {
              this.isOpen = !this.isOpen;
              this.closeMessage();
            } else {
              this.letKnowUser = true;
              this.message = "Necesitas ingresar usuario y contrase침a para poder iniciar sesion"
            }
          },
          logOut() {

          },
          addPost() {
            const fields = [
              this.titlePost,
              this.descriptionPost
            ];
            if (this.checkEmptyFields(fields)) {
              this.posts.unshift({
                title: this.titlePost,
                description: this.descriptionPost
              });
              this.titlePost = '';
              this.descriptionPost = ''
            } else {
              this.letKnowUser = true;
              this.message = "Necesitas poner un titulo y contenido para crear el post"
            }
          },
          deletePost(index) {
            this.posts.splice(index, 1);
          },
          closeMessage() {
            this.letKnowUser = false;
            this.message = '';
          },
          checkEmptyFields(fields) {
            return !fields.includes('');
          }
        },
        watch: {
          isOpen(value) {
            if(!value){
              this.text = 'Accede a tu cuenta'
              this.userName = ''
            } else {
              this.text = "Cierra sesi칩n";
            }
          },
        },
      }).mount("#app");
      const lista = [];
      lista.shift
    </script>
  </body>
</html>
